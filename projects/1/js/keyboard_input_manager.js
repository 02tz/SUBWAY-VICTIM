function KeyboardInputManager(){this.events={},window.navigator.msPointerEnabled?(this.eventTouchstart="MSPointerDown",this.eventTouchmove="MSPointerMove",this.eventTouchend="MSPointerUp"):(this.eventTouchstart="touchstart",this.eventTouchmove="touchmove",this.eventTouchend="touchend"),this.listen()}KeyboardInputManager.prototype.on=function(e,t){this.events[e]||(this.events[e]=[]),this.events[e].push(t)},KeyboardInputManager.prototype.emit=function(e,t){var n=this.events[e];n&&n.forEach((function(e){e(t)}))},KeyboardInputManager.prototype.listen=function(){var e=this,t={38:0,39:1,40:2,37:3,75:0,76:1,74:2,72:3,87:0,68:1,83:2,65:3};document.addEventListener("keydown",(function(n){var i=n.altKey||n.ctrlKey||n.metaKey||n.shiftKey,a=t[n.which];i||(void 0!==a&&(n.preventDefault(),e.emit("move",a)),32===n.which&&e.restart.bind(e)(n))}));var n=document.querySelector(".retry-button");n.addEventListener("click",this.restart.bind(this)),n.addEventListener(this.eventTouchend,this.restart.bind(this));var i,a,o=document.querySelector(".keep-playing-button");o.addEventListener("click",this.keepPlaying.bind(this)),o.addEventListener("touchend",this.keepPlaying.bind(this));var r=document.getElementsByClassName("game-container")[0];r.addEventListener(this.eventTouchstart,(function(e){!window.navigator.msPointerEnabled&&e.touches.length>1||e.targetTouches>1||(window.navigator.msPointerEnabled?(i=e.pageX,a=e.pageY):(i=e.touches[0].clientX,a=e.touches[0].clientY),e.preventDefault())})),r.addEventListener(this.eventTouchmove,(function(e){e.preventDefault()})),r.addEventListener(this.eventTouchend,(function(t){if(!(!window.navigator.msPointerEnabled&&t.touches.length>0||t.targetTouches>0)){var n,o;window.navigator.msPointerEnabled?(n=t.pageX,o=t.pageY):(n=t.changedTouches[0].clientX,o=t.changedTouches[0].clientY);var r=n-i,s=Math.abs(r),h=o-a,c=Math.abs(h);Math.max(s,c)>10&&e.emit("move",s>c?r>0?1:3:h>0?2:0)}}))},KeyboardInputManager.prototype.restart=function(e){e.preventDefault(),this.emit("restart")},KeyboardInputManager.prototype.keepPlaying=function(e){e.preventDefault(),this.emit("keepPlaying")};
