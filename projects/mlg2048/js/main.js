"use strict";import"babel-polyfill";import"normalize.css";import"../style/style.scss";import"../style/game.scss";import"../style/animations.scss";import{default as Hammer}from"hammerjs";import{Game}from"./game.js";import*as Misc from"./misc.js";import{View}from"./view.js";let game=new Game,view=new View(game);game.on("lose",e=>{_paq.push(["trackEvent","GameOver",`score: ${e.score}, highest: ${e.highestCell}`])});let transitioning=!1;document.onkeydown=(async(e=window.event)=>{switch(e.keyCode){case 87:case 38:transitioning||game.move("up"),e.preventDefault();break;case 83:case 40:transitioning||game.move("down"),e.preventDefault();break;case 65:case 37:transitioning||game.move("left"),e.preventDefault();break;case 68:case 39:transitioning||game.move("right"),e.preventDefault()}transitioning=!0,await Misc.sleep(100),transitioning=!1});let hammertime=new Hammer(document.querySelector(".game-board"));hammertime.get("swipe").set({direction:Hammer.DIRECTION_ALL}),hammertime.on("swipe",e=>{const t=Math.round((e.angle+360)%360/90)%4;game.move(["right","down","left","up"][t])}),document.querySelector(".epilepsy-warning").addEventListener("click",e=>{e.target.classList.add("hide")});